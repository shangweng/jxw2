"use strict";!function(s){var i=location.search.substring(1).split("=")[1];console.log(i);var e=s("#smallpic"),l=s("#bpic"),c=s(".loadtitle"),n=s(".loadpcp");s.ajax({url:"http://10.31.162.68/hdf_jxwproject/php/getsid.php",data:{goods_id:i},dataType:"json"}).done(function(i){console.log(i),e.attr("src",i.goods_big_logo),e.attr("goods_id",i.goods_id),l.attr("src",i.goods_big_logo),c.html(i.goods_name),n.html(i.goods_price);var o=i.goods_small_logo.split(","),t="";s.each(o,function(i,o){t+='<li><img src="'+o+'"/>></li>'}),s("#list ul").html(t)});var a=s("#spic"),r=s("#sf"),o=s("#bf"),t=s("#left"),h=s("#right");s("#list");r.width(a.width()*o.width()/l.width()),r.height(a.height()*o.height()/l.height());var d=l.width()/a.width();a.hover(function(){r.css("visibility","visible"),o.css("visibility","visible"),s(this).on("mousemove",function(i){var o=i.pageX-s(".goodsinfo").offset().left-r.width()/2,t=i.pageY-s(".goodsinfo").offset().top-r.height()/2;o<0?o=0:o>=a.width()-r.width()&&(o=a.width()-r.width()),t<0?t=0:t>=a.height()-r.height()&&(t=a.height()-r.height()),r.css({left:o,top:t}),l.css({left:-o*d,top:-t*d})})},function(){r.css("visibility","hidden"),o.css("visibility","hidden")}),s("#list ul").on("click","li",function(){var i=s(this).find("img").attr("src");e.attr("src",i),l.attr("src",i)});var g=6;h.on("click",function(){var i=s("#list ul li");i.size()>g&&(g++,t.css("color","#333"),i.size()==g&&h.css("color","#fff"),s("#list ul").animate({left:-(g-6)*i.eq(0).outerWidth(!0)}))}),t.on("click",function(){var i=s("#list ul li");6<g&&(g--,h.css("color","#333"),g<=6&&t.css("color","#fff"),s("#list ul").animate({left:-(g-6)*i.eq(0).outerWidth(!0)}))});var f=[],p=[];s(".p-btn a").on("click",function(){var i,o=s(this).parents(".goodsinfo").find("#smallpic").attr("goods_id");p=s.cookie("cookiesid")&&s.cookie("cookienum")?(f=s.cookie("cookiesid").split(","),s.cookie("cookienum").split(",")):(f=[],[]),-1!=s.inArray(o,f)?(i=parseInt(p[s.inArray(o,f)])+parseInt(s("#count").val()),p[s.inArray(o,f)]=i):(f.push(o),s.cookie("cookiesid",f,{expires:10,path:"/"}),p.push(s("#count").val())),s.cookie("cookienum",p,{expires:10,path:"/"}),alert("加入购物车")})}(jQuery);